import{_ as s,c as t,o as i,a2 as a}from"./chunks/framework.CexspsV9.js";const n="/omni-ui/assets/pullable1.DAygKC4t.png",l="/omni-ui/assets/pullable2.B4TL4ZFG.png",h="/omni-ui/assets/pullable3.CADxQP61.png",F=JSON.parse('{"title":"上下拉刷新PullToRefresh","description":"","frontmatter":{},"headers":[],"relativePath":"components/view/pulltorefresh.md","filePath":"components/view/pulltorefresh.md"}'),d={name:"components/view/pulltorefresh.md"},e=a('<h1 id="上下拉刷新pulltorefresh" tabindex="-1">上下拉刷新PullToRefresh <a class="header-anchor" href="#上下拉刷新pulltorefresh" aria-label="Permalink to &quot;上下拉刷新PullToRefresh&quot;">​</a></h1><h2 id="一、效果总览" tabindex="-1">一、效果总览 <a class="header-anchor" href="#一、效果总览" aria-label="Permalink to &quot;一、效果总览&quot;">​</a></h2><div style="display:flex;justify-content:space-between;"><img src="'+n+'" height="400" width="200"><img src="'+l+'" height="400" width="200"><img src="'+h+`" height="400" width="200"></div><h2 id="二、描述" tabindex="-1">二、描述 <a class="header-anchor" href="#二、描述" aria-label="Permalink to &quot;二、描述&quot;">​</a></h2><ul><li><p>支持上下拉刷新， 无数据侵入。</p></li><li><p>支持任意组件的嵌套，支持任意布局(List,Grid,Web,Scroll,Text,Row,Column)等布局</p></li><li><p>支持自定义异常页面loading页面等。</p></li><li><p>支持主动调用进入上下拉状态</p></li></ul><h2 id="三、构造函数及参数说明" tabindex="-1">三、构造函数及参数说明 <a class="header-anchor" href="#三、构造函数及参数说明" aria-label="Permalink to &quot;三、构造函数及参数说明&quot;">​</a></h2><h3 id="omnipulltorefreshlayout" tabindex="-1">OmniPullToRefreshLayout <a class="header-anchor" href="#omnipulltorefreshlayout" aria-label="Permalink to &quot;OmniPullToRefreshLayout&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>参数类型</th><th>描述</th><th>是否必填</th><th>默认值</th></tr></thead><tbody><tr><td>config</td><td>OmniRefreshLayoutConfig</td><td>上下拉配置项</td><td>是</td><td>无</td></tr><tr><td>controller</td><td>OmniPullableController</td><td>用于控制和获取上下拉控制器的状态</td><td>是</td><td>无</td></tr><tr><td>scroller</td><td>Scroller</td><td>内容视图的引用</td><td>是</td><td>无</td></tr><tr><td>onRefresh</td><td>() =&gt; void</td><td>下拉刷新的回调</td><td>否</td><td>null</td></tr><tr><td>onPullListener</td><td>(OmniPullDown: OmniPullDown) =&gt; void</td><td>上下拉加载状态监听</td><td>否</td><td>null</td></tr><tr><td>contentView</td><td>() =&gt; void</td><td>设置内容视图</td><td>是</td><td>null</td></tr><tr><td>viewLoading</td><td>() =&gt; void</td><td>加载中自定义视图</td><td>否</td><td>null</td></tr><tr><td>viewEmpty</td><td>() =&gt; void</td><td>空数据自定义视图</td><td>否</td><td>null</td></tr><tr><td>viewError</td><td>() =&gt; void</td><td>数据错误自定义视图</td><td>否</td><td>null</td></tr><tr><td>viewNoNetwork</td><td>() =&gt; void</td><td>网络异常自定义视图</td><td>否</td><td>null</td></tr></tbody></table><h3 id="omnipullablecontroller" tabindex="-1">OmniPullableController <a class="header-anchor" href="#omnipullablecontroller" aria-label="Permalink to &quot;OmniPullableController&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>参数类型</th><th>描述</th><th>是否必填</th><th>默认值</th></tr></thead><tbody><tr><td>refreshSuccess</td><td>() =&gt; void</td><td>下拉刷新成功，当数据处理完成后需要根据数据情况调用该方法</td><td>是</td><td>null</td></tr><tr><td>loadSuccess</td><td>(hasMore?: boolean) =&gt; void</td><td>下拉刷新成功， 当数据处理完成后需要根据数据情况调用该方法</td><td>否</td><td>null</td></tr><tr><td>viewLoading</td><td>() =&gt; void</td><td>当需要展示自定义loadingView时调用该方法</td><td>否</td><td>null</td></tr><tr><td>viewEmpty</td><td>() =&gt; void</td><td>当需要展示自定义emptyView时调用该方法</td><td>否</td><td>null</td></tr><tr><td>viewError</td><td>() =&gt; void</td><td>当需要展示自定义errowView时调用该方法</td><td>否</td><td>null</td></tr><tr><td>refresh</td><td>() =&gt; void</td><td>手动触发下拉刷新</td><td>否</td><td>null</td></tr><tr><td>load</td><td>() =&gt; void</td><td>手动触发上拉加载</td><td>否</td><td>null</td></tr></tbody></table><h3 id="omnirefreshlayoutconfig" tabindex="-1">OmniRefreshLayoutConfig <a class="header-anchor" href="#omnirefreshlayoutconfig" aria-label="Permalink to &quot;OmniRefreshLayoutConfig&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>参数类型</th><th>描述</th><th>是否必填</th><th>默认值</th></tr></thead><tbody><tr><td>pullRefreshEnable</td><td>bool</td><td>是否开启下拉刷新</td><td>否</td><td>true</td></tr><tr><td>loadMoreEnable</td><td>bool</td><td>是否开启上拉加载</td><td>否</td><td>false</td></tr><tr><td>pullMaxDistance</td><td>number</td><td>下拉最大距离</td><td>否</td><td>500</td></tr><tr><td>pullRefreshResistance</td><td>number</td><td>下拉阻力</td><td>否</td><td>0.5</td></tr><tr><td>pullLoadMaxDistance</td><td>number</td><td>上拉最大距离</td><td>否</td><td>500</td></tr><tr><td>pullLoadResistance</td><td>number</td><td>上拉阻力</td><td>否</td><td>0.5</td></tr></tbody></table><h3 id="omnipullstatus" tabindex="-1">OmniPullStatus <a class="header-anchor" href="#omnipullstatus" aria-label="Permalink to &quot;OmniPullStatus&quot;">​</a></h3><table tabindex="0"><thead><tr><th>枚举值</th><th>含义</th></tr></thead><tbody><tr><td>DEF</td><td>默认状态</td></tr><tr><td>PullDown</td><td>正在下拉</td></tr><tr><td>PreRefresh</td><td>达到可下拉状态</td></tr><tr><td>Refresh</td><td>刷新中</td></tr><tr><td>RefreshSuccess</td><td>刷新成功</td></tr><tr><td>RefreshError</td><td>刷新失败</td></tr><tr><td>PullUp</td><td>正在加载</td></tr><tr><td>PreLoad</td><td>达到可加载状态</td></tr><tr><td>Load</td><td>加载中</td></tr><tr><td>LoadSuccess</td><td>加载成功</td></tr><tr><td>LoadError</td><td>加载失败</td></tr></tbody></table><h2 id="四、代码演示" tabindex="-1">四、代码演示 <a class="header-anchor" href="#四、代码演示" aria-label="Permalink to &quot;四、代码演示&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">public </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">controller</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: OmniPullableController </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OmniPullableController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">private </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: OmniRefreshLayoutConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OmniRefreshLayoutConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scroller</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Scroller </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scroller</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  OmniPullToRefreshLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scroller: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scroller,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  config: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  controller: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controller,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自定义数据异常视图</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自定义无数据视图</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewNoNetwork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自定义网络异常视图</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  viewLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 自定义加载态视图</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  contentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 下拉刷新回调， 执行数据操作</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refreshSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 上拉加载回调， 执行数据操作</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onPullListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pullDown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 获取上下拉状态监听</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;70%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Builder</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ scroller: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.scroller }) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 省略自定义视图代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">edgeEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EdgeEffect.None)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,16),p=[e];function r(k,E,o,g,y,c){return i(),t("div",null,p)}const f=s(d,[["render",r]]);export{F as __pageData,f as default};
